(this["webpackJsonpreact-api"]=this["webpackJsonpreact-api"]||[]).push([[0],{45:function(e,t,a){e.exports=a(75)},75:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(6),c=a(9),i=a(7),l=a(8),o=a(38),u=a.n(o),s=a(21),m=a(19),d=a(0),h=a.n(d),p=a(10),v=a(76),k=a(80),b=a(81),E=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return d.createElement("div",null,this.convertDateTimeFromSQL(this.props.post_date))}},{key:"convertDateTimeFromSQL",value:function(e){var t=e.split("-"),a=t[0],n=t[1],r=t[2].split("T"),c=r[0],i=r[1].split(":");return i[0]+":"+i[1]+", "+c+"."+n+"."+a}}]),t}(d.Component),f=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return d.createElement(v.a,null,d.createElement("div",{className:"col-lg-4"},d.createElement(k.a,{className:"m-4 bg-dark text-white"},d.createElement(b.a,{variant:"outline-info",disabled:!0},"Placeholder ticket"),d.createElement("div",{className:"card-header"},d.createElement("h5",{className:"card-title text-center"},d.createElement("span",{className:"text-info"},"Focus")," to place tickets here")),d.createElement("div",{className:"card-body"},d.createElement("p",{className:"card-subtitle m-2 text-center"},d.createElement("span",{className:"text-info"},"Focus")," a ticket from the list below to move it here, and get access to additional support tools"),d.createElement("br",null),d.createElement("br",null)),d.createElement("br",null),d.createElement("br",null))))}}]),t}(d.Component),y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).alerts=[],a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return d.createElement(d.Fragment,null,this.alerts.map((function(t,a){return d.createElement("div",{key:t.id,className:"alert alert-"+t.type,role:"alert"},t.text,d.createElement("button",{type:"button",className:"close",onClick:function(){e.alerts.splice(a,1)}},"\xd7"))})))}}],[{key:"success",value:function(e){setTimeout((function(){var a=!0,n=!1,r=void 0;try{for(var c,i=t.instances()[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){c.value.alerts.push({id:t.nextId++,text:e,type:"success"})}}catch(l){n=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}))}},{key:"info",value:function(e){setTimeout((function(){var a=!0,n=!1,r=void 0;try{for(var c,i=t.instances()[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){c.value.alerts.push({id:t.nextId++,text:e,type:"info"})}}catch(l){n=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}))}},{key:"warning",value:function(e){setTimeout((function(){var a=!0,n=!1,r=void 0;try{for(var c,i=t.instances()[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){c.value.alerts.push({id:t.nextId++,text:e,type:"warning"})}}catch(l){n=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}))}},{key:"danger",value:function(e){setTimeout((function(){var a=!0,n=!1,r=void 0;try{for(var c,i=t.instances()[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){c.value.alerts.push({id:t.nextId++,text:e,type:"danger"})}}catch(l){n=!0,r=l}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}))}}]),t}(p.Component);y.nextId=0;var g=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return d.createElement(s.b,{className:"nav-link",activeClassName:"active",exact:this.props.exact,to:this.props.to},this.props.children)}}]),t}(p.Component),j=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return d.createElement("nav",{className:"navbar navbar-expand-sm bg-light navbar-light"},d.createElement(s.b,{className:"navbar-brand",activeClassName:"active",exact:!0,to:"/"},this.props.brand),d.createElement("ul",{className:"navbar-nav"},this.props.children))}}]),t}(p.Component);j.Link=g;p.Component;var O=a(16),C=a.n(O),_=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"createTicket",value:function(e){return C.a.post("/create_ticket",e)}},{key:"createComment",value:function(e){return C.a.post("/create_comment",e)}},{key:"getTickets",value:function(e){return C.a.get("/tickets/priority/"+e)}},{key:"getComments",value:function(e){return C.a.get("/comments/ticket_id/"+e)}},{key:"getAllTickets",value:function(){return C.a.get("/tickets/")}},{key:"updateTicketPriority",value:function(e){return C.a.put("/tickets",e)}},{key:"solveTicket",value:function(e){return C.a.put("/tickets",e)}},{key:"getGroups",value:function(){return C.a.get("/groups")}}]),e}(),T=Object(p.sharedComponentData)(new _),x=a(22),N=a(77),w=a(18),S=a(79),I=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={comments:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return 0===this.state.comments.length?h.a.createElement("h5",null,"No comments yet"):h.a.createElement("div",null,h.a.createElement("h5",null,"Comments:"),this.state.comments.map((function(e){return h.a.createElement(v.a,null,h.a.createElement(x.a,{sm:3},h.a.createElement("div",{className:"text-muted"}," ",h.a.createElement(E,{post_date:e.post_date})," ")),h.a.createElement(x.a,{sm:9},h.a.createElement("div",{className:"card-text"},e.content)))})))}},{key:"componentDidMount",value:function(){var e=this;T.getComments(this.props.id).then((function(t){var a=t.data;e.setState({comments:a})}))}},{key:"convertDateTimeFromSQL",value:function(e){var t=e.split("-"),a=t[0],n=t[1],r=t[2].split("T"),c=r[0],i=r[1].split(":");return i[0]+":"+i[1]+", "+c+"."+n+"."+a}}]),t}(h.a.Component),D=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={content:"",priority:1,post_date:"2019-03-15 01:01:22",ticket_id:a.props.id},a.handleInputChange=a.handleInputChange.bind(Object(w.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(w.a)(a)),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return h.a.createElement("div",{className:"ml-3"},h.a.createElement(S.a,{onSubmit:this.handleSubmit},h.a.createElement(v.a,null,h.a.createElement(S.a.Group,null,h.a.createElement(S.a.Control,{type:"textarea",maxLength:"75",name:"commentSubmit",placeholder:"Write a comment",value:this.state.content,onChange:this.handleInputChange})),h.a.createElement(S.a.Group,null,h.a.createElement(b.a,{className:"ml-2",variant:"btn btn-primary bt-md",type:"submit"}," Submit ")))))}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value;this.setState({content:a})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.submitComment()}},{key:"submitComment",value:function(){window.location.reload();var e={content:this.state.content,priority:this.state.priority,post_date:this.state.post_date,ticket_id:this.state.ticket_id};T.createComment(e).then((function(){return console.log("comment created successfully")}))}},{key:"componentDidMount",value:function(){console.log("this is the submit form for comment id "+this.props.id)}}]),t}(h.a.Component),F=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={tickets:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"deFocusTicket",value:function(e){window.location.reload();var t={ticket_id:e.ticket_id,headline:e.headline,content:e.content,priority:2,picture:e.picture,post_date:e.post_date,email:e.email,group_id:e.group_id,author:e.author};T.updateTicketPriority(t)}},{key:"render",value:function(){var e=this;return this.state.tickets.length<1?h.a.createElement(f,null):h.a.createElement("div",null,h.a.createElement(v.a,null,this.state.tickets.map((function(t){return h.a.createElement("div",{className:"col-lg-4"},h.a.createElement(k.a,{className:"m-4 bg-dark text-white"},h.a.createElement(b.a,{variant:"outline-info",onClick:function(){return e.deFocusTicket(t)}},"Defocus"),h.a.createElement("div",{className:"card-header"},h.a.createElement("h5",{className:"card-title"},t.headline)),h.a.createElement("div",{className:"card-body"},h.a.createElement("img",{className:"card-img-top img-fluid",alt:t.headline,src:t.picture}),h.a.createElement("p",{className:"card-subtitle m-2"},t.content)),h.a.createElement("div",{className:"card-footer"},h.a.createElement("p",{className:"card-text"},"Ticket number: ",t.ticket_id),h.a.createElement("p",{className:"card-subtitle mb-2 text-light"},"Customer: ",t.author),h.a.createElement("p",{className:"card-subtitle mb-2"},h.a.createElement(b.a,{variant:"link",onClick:function(){return e.sendEmail(t)}},"Contact")),h.a.createElement(v.a,null,h.a.createElement(x.a,{sm:3},h.a.createElement("p",{className:"text-white"},"Ticket posted:")),h.a.createElement(x.a,null,h.a.createElement("p",{className:"text-muted"},h.a.createElement(E,{post_date:t.post_date})))),h.a.createElement(I,{id:t.ticket_id}),h.a.createElement("br",null),h.a.createElement(D,{id:t.ticket_id})),h.a.createElement(b.a,{variant:"outline-danger",onClick:function(){return e.archiveTicket(t)}},"Mark as solved")))}))))}},{key:"componentDidMount",value:function(){var e=this;T.getTickets(1).then((function(t){var a=t.data;e.setState({tickets:a})}))}},{key:"sendEmail",value:function(e){var t=e.email;window.open("mailto:"+t,"_blank")}},{key:"archiveTicket",value:function(e){window.location.reload();var t={ticket_id:e.ticket_id,headline:e.headline,content:e.content,priority:3,category:e.category,picture:e.picture,post_date:e.post_date,author:e.author};T.solveTicket(t)}}]),t}(h.a.Component),L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={tickets:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return h.a.createElement("div",{className:"card m-4 bg-dark text-white"},h.a.createElement(N.a,{responsive:"sm",striped:!0,bordered:!0,hover:!0,variant:"dark","max-width":20},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",null,h.a.createElement(b.a,{variant:"success",onClick:function(){return e.refresh()}},"Refresh list")),h.a.createElement("th",null,"Ticket ID"),h.a.createElement("th",null,"Customer"),h.a.createElement("th",null,"Order Number"),h.a.createElement("th",null,"Content"),h.a.createElement("th",null,"Submitted"),h.a.createElement("th",null,"Archive"))),h.a.createElement("tbody",null,this.state.tickets.map((function(t){return h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(b.a,{variant:"info",onClick:function(){return e.focusTicket(t)}},"Focus")),h.a.createElement("td",null,t.ticket_id),h.a.createElement("td",null,t.author),h.a.createElement("td",null,t.headline),h.a.createElement("td",null,t.content),h.a.createElement("td",null,h.a.createElement(E,{post_date:t.post_date})),h.a.createElement("td",null,h.a.createElement(b.a,{variant:"danger",onClick:function(){return e.archiveTicket(t)}},"Mark as solved")))})))))}},{key:"focusTicket",value:function(e){window.location.reload();var t={ticket_id:e.ticket_id,headline:e.headline,content:e.content,priority:1,picture:e.picture,post_date:e.post_date,email:e.email,group_id:e.group_id,author:e.author};T.updateTicketPriority(t)}},{key:"componentDidMount",value:function(){var e=this;T.getTickets(2).then((function(t){var a=t.data;e.setState({tickets:a})}))}},{key:"refresh",value:function(){window.location.reload()}},{key:"archiveTicket",value:function(e){window.location.reload();var t={ticket_id:e.ticket_id,headline:e.headline,content:e.content,priority:3,category:e.category,picture:e.picture,post_date:e.post_date,author:e.author};T.solveTicket(t)}}]),t}(h.a.Component),M=a(78),G=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).intervalID=0,a.state={tickets:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return 0===this.state.tickets.length?h.a.createElement("div",null,h.a.createElement(v.a,null," ",h.a.createElement(M.a.Item,{className:"m-2",variant:"primary"},"No new tickets")," ")):h.a.createElement("div",null,h.a.createElement(M.a,{horizontal:!0,variant:"flush"},h.a.createElement(v.a,null,h.a.createElement(M.a.Item,{className:"m-2",variant:"danger"},"Latest tickets:"),this.state.tickets.map((function(t){return h.a.createElement("div",null,h.a.createElement(M.a.Item,{onClick:function(){return e.focusTicket(t)},className:"m-2",variant:"dark"},e.convertDateTimeFromSQL(t.post_date),'"',t.content.substring(0,25),'..." by ',t.author))})))))}},{key:"componentDidMount",value:function(){this.updateTickets(),this.startUpdater()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"focusTicket",value:function(e){window.location.reload();var t={ticket_id:e.ticket_id,headline:e.headline,content:e.content,priority:1,picture:e.picture,post_date:e.post_date,email:e.email,group_id:e.group_id,author:e.author};T.updateTicketPriority(t)}},{key:"startUpdater",value:function(){var e=this;this.intervalID=setInterval((function(){e.updateTickets()}),5e3)}},{key:"updateTickets",value:function(){var e=this;T.getAllTickets().then((function(t){var a=t.data;e.setState({tickets:a})}))}},{key:"convertDateTimeFromSQL",value:function(e){var t=e.split("-")[2].split("T")[1].split(":");return t[0]+":"+t[1]+": "}}]),t}(h.a.Component),P=(h.a.Component,function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement(k.a,{className:"m-4 bg-dark text-white"},h.a.createElement("div",{className:"card-header"},h.a.createElement("h5",{className:"card-title"},"Toolbar"),h.a.createElement(G,null))))}}]),t}(h.a.Component)),Q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={tickets:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return h.a.createElement("div",{className:"card m-4 bg-dark text-white"},h.a.createElement(N.a,{responsive:"sm",striped:!0,bordered:!0,hover:!0,variant:"dark","max-width":20},h.a.createElement("thead",null,h.a.createElement("tr",null,h.a.createElement("th",null,"Recover"),h.a.createElement("th",null,"Ticket ID"),h.a.createElement("th",null,"Customer"),h.a.createElement("th",null,"Order Number"),h.a.createElement("th",null,"Content"),h.a.createElement("th",null,"Submitted"))),h.a.createElement("tbody",null,this.state.tickets.map((function(t){return h.a.createElement("tr",null,h.a.createElement("td",null,h.a.createElement(b.a,{variant:"warning",onClick:function(){return e.recoverTicket(t)}},"Recover ticket")),h.a.createElement("td",null,t.ticket_id),h.a.createElement("td",null,t.author),h.a.createElement("td",null,t.headline),h.a.createElement("td",null,t.content),h.a.createElement("td",null,e.convertDateTimeFromSQL(t.post_date)))})))))}},{key:"recoverTicket",value:function(e){window.location.reload();var t={ticket_id:e.ticket_id,headline:e.headline,content:e.content,priority:2,picture:e.picture,post_date:e.post_date,email:e.email,group_id:e.group_id,author:e.author};T.updateTicketPriority(t)}},{key:"componentDidMount",value:function(){var e=this;T.getTickets(3).then((function(t){var a=t.data;e.setState({tickets:a})}))}},{key:"archiveTicket",value:function(e){window.location.reload();var t={ticket_id:e.ticket_id,headline:e.headline,content:e.content,priority:3,category:e.category,picture:e.picture,post_date:e.post_date,author:e.author};T.solveTicket(t)}},{key:"convertDateTimeFromSQL",value:function(e){var t=e.split("-"),a=t[0],n=t[1],r=t[2].split("T"),c=r[0],i=r[1].split(":");return"Ticket posted: "+i[0]+":"+i[1]+", "+c+"."+n+"."+a}}]),t}(p.Component),W=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return h.a.createElement("div",{className:"card col-lg4 m-4 bg-dark text-white"},h.a.createElement("div",{className:"card-header"},h.a.createElement("h2",{className:"card-title"},"Frequently asked questions")),h.a.createElement("div",{className:"m-4"},h.a.createElement("h5",null,"When will I get my order?"),h.a.createElement("p",null,"The pre order status can be found on the product page"),h.a.createElement("h5",null,"Where can i find the product page?"),h.a.createElement("p",null,"You can find the product page on the product page. "),h.a.createElement("h5",null,"When is the next pre order?"),h.a.createElement("p",null,"The next pre order is December 2019"),h.a.createElement("h5",null,"What is the difference between Klippe and Fjell?"),h.a.createElement("p",null,"Fjell is a more premium offering with chamfered edges and more case material.")))}}]),t}(p.Component),A=a(44),U=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={headline:"",content:"",priority:2,picture:"",post_date:"2000-01-01 00:00:00",email:"",group_id:1,author:""},a.handleInputChange=a.handleInputChange.bind(Object(w.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(w.a)(a)),a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;console.log(n+" verdi: "+a),this.setState(Object(A.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.submitTicket()}},{key:"render",value:function(){return h.a.createElement("div",{className:"card col-lg4 m-4 bg-dark text-white"},h.a.createElement("div",{className:"card-header"},h.a.createElement("h2",{className:"card-title"},"Submit a new ticket")),h.a.createElement("div",{class:"m-4"},h.a.createElement(S.a,{onSubmit:this.handleSubmit},h.a.createElement(S.a.Group,null,h.a.createElement(S.a.Control,{type:"number",name:"headline",placeholder:"Enter order number",value:this.state.headline,onChange:this.handleInputChange}),h.a.createElement(S.a.Text,null," This field only accept numbers ")),h.a.createElement(S.a.Group,null,h.a.createElement(S.a.Control,{type:"text",maxLength:"255",name:"author",placeholder:"Enter your name",value:this.state.author,onChange:this.handleInputChange})),h.a.createElement(S.a.Group,null,h.a.createElement(S.a.Control,{as:"textarea",rows:"6",cols:"40",name:"content",maxLength:"255",placeholder:"Please briefly explain the issue",value:this.state.content,onChange:this.handleInputChange}),h.a.createElement(S.a.Text,null," Max length: 255 ")),h.a.createElement(S.a.Group,null,h.a.createElement(S.a.Control,{type:"email",name:"email",placeholder:"Enter your email",value:this.state.email,onChange:this.handleInputChange})),h.a.createElement(S.a.Group,null,h.a.createElement(S.a.Control,{type:"text",maxLength:"255",name:"picture",placeholder:"Please enter a picture URL",value:this.state.picture,onChange:this.handleInputChange})),h.a.createElement("div",{class:"card-footer"},h.a.createElement(S.a.Group,null,h.a.createElement(b.a,{variant:"btn btn-primary btn-lg",type:"submit"}," Submit "))))))}},{key:"submitTicket",value:function(){var e=this.state.picture;""===this.state.picture&&(e="http://i.imgur.com/zz26WUB.jpg");var t={headline:this.state.headline,content:this.state.content,priority:this.state.priority,picture:e,post_date:this.state.post_date,group_id:this.state.group_id,author:this.state.author};T.createTicket(t).then((function(e){return console.log(e)})),alert("Thank you, you will hear from us shortly."),window.location.reload()}}]),t}(h.a.Component),R=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return h.a.createElement(j,{variant:"dark",brand:"Mekanisk Support Dashboard"},h.a.createElement(j.Link,{to:"/tickets"},"Tickets"),h.a.createElement(j.Link,{to:"/archive"},"Archive"))}}]),t}(p.Component),z=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return h.a.createElement("div",{class:"card"},h.a.createElement("p",{class:"text-muted"},"Copyright Mekanisk AS 2019"))}}]),t}(p.Component),q=document.getElementById("root");q&&u.a.render(h.a.createElement(s.a,null,h.a.createElement("div",{className:"bg-light"},h.a.createElement(y,null),h.a.createElement(R,null),h.a.createElement(m.a,{exact:!0,path:"/",component:W}),h.a.createElement(m.a,{exact:!0,path:"/",component:U}),h.a.createElement(m.a,{path:"/tickets",component:P}),h.a.createElement(m.a,{path:"/tickets",component:F}),h.a.createElement(m.a,{path:"/tickets",component:L}),h.a.createElement(m.a,{path:"/archive",component:Q}),h.a.createElement(z,null))),q)}},[[45,1,2]]]);
//# sourceMappingURL=main.49f2cd86.chunk.js.map